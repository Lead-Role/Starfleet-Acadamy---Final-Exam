<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Trek Trivia - LCARS Interface</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap");

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  display: flex;
  flex-direction: column;
  background-color: #000000;
  font-family: "Orbitron", sans-serif;
  color: #ffcc33;
  text-align: center;
  overflow-x: hidden;
}

.lcars-title-bar {
  background-color: #ffd700;
  font-weight: bold;
  padding: 10px;
  text-align: center;
  border-bottom: 4px solid #663300;
}

.lcars-title {
  font-size: 20pt;
  color: #000000;
  letter-spacing: 2px;
  text-transform: uppercase;
}

.lcars-container {
  display: flex;
  flex-grow: 1;
  justify-content: space-between;
  margin: 0;
  padding: 0;
}

.lcars-sidebar {
  width: 350px;
  height: 600px;
  background-color: #152238;
  padding: 2px;
  color: #ff9933;
  border-radius: 25px 0 0 25px;
  background-image: url('https://raw.githubusercontent.com/Lead-Role/LCARS-Trivia/refs/heads/main/LCARS%20Android.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center bottom;
  position: relative;
  text-align: center;
  flex-shrink: 0;
}

.lcars-sidebar p {
  margin: 0;
  padding: 0;
}

.lcars-sidebar p:first-child {
  font-size: 18px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 10px;
  padding-top: 20px;
}

#stardate-container {
  position: absolute;
  left: 30px;
}

#stardate {
  text-align: left;
  color: #ffffff;
  font-size: 14pt;
  margin: 0;
}

.lcars-main {
  flex-grow: 1;
  background-color: #000000;
  padding: 50px 50px 3px 50px;
  color: #ffcc33;
  border: 4px solid #ff9933;
  border-radius: 25px;
  box-sizing: border-box;
  overflow-y: auto;
  margin-bottom: 3px;
  font-family: Arial, sans-serif;
}

.lcars-footer {
  background-color: #800020;
  padding: 15px 0;
  color: #ffff00;
  position: fixed;
  bottom: 0;
  width: 100%;
  text-align: center;
  border-top: 4px solid #ff9933;
  font-size: 16pt;
  font-weight: bold;
  box-sizing: border-box;
  line-height: 1.2;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

.lcars-footer #stardate {
  text-align: left;
  padding-left: 30px;
  color: #ffffff;
  font-size: 14pt;
  margin: 0;
}

button {
  font-size: 14pt;
  background-color: #003366;
  color: #ffcc33;
  border: 2px solid white;
  padding: 8px 16px;
  margin: 10px;
  cursor: pointer;
  border-radius: 10px;
  transition: all 0.2s ease;
}

button:hover {
  background-color: #ff9933;
  color: #000000;
}

button.question-button {
  width: 150px;
  font-family: Arial, sans-serif;
  font-size: 16pt;
  color: #ffd700;
  background: linear-gradient(to bottom, #444444, #000000);
  border: 4px solid #ffd700;
  padding: 10px 0;
  margin: 10px;
  cursor: pointer;
  border-radius: 6px;
  box-shadow: 2px 2px 5px #ffffff;
  transition: all 0.3s ease;
  text-align: center;
}

button.question-button:hover {
  background: linear-gradient(to bottom, #000000, #444444);
  box-shadow: 2px 2px 7px #ffffff;
  transform: translateY(-2px);
}

.answer-button {
  border: 2px solid white;
}

.description {
  font-size: 18pt;
  margin: 20px 0;
}

.question-count {
  font-size: 16pt;
  margin-top: 75px;
}

.button-container {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 50px;
}

.lcars-category,
.lcars-description {
  display: block;
  padding: 8px;
  background-color: #003366;
  color: #ffcc33;
  border-radius: 10px;
  margin-top: 15px;
  font-size: 12pt;
  max-width: 100%;
  word-wrap: break-word;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}

.lcars-question {
  font-size: 16pt;
  margin: 20px auto;
  max-width: 80%;
  word-wrap: break-word;
  color: #ffffff;
}

.lcars-answer-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  margin-top: 20px;
}

.question-image-container,
.answer-image-container {
  width: 100px;
  height: 100px;
  display: inline-block;
  vertical-align: top;
  border-radius: 10px;
  padding: 10px;
  box-sizing: border-box;
  text-align: center;
  margin: 0;
  padding-left: 25px;
  float: left;
  background-color: transparent;
}

.narrative {
  font-size: 14pt;
  margin-top: 20px;
}

.lcars-feedback {
  font-size: 14pt;
  margin-top: 20px;
  color: limegreen;
}

.lcars-score {
  font-size: 15pt;
  margin-top: 20px;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
  display: block;
  width: fit-content;
  position: relative;
  top: 40px;
  color: #ffffff;
}

.question-image,
.answer-image {
  max-width: 150%;
  max-height: 150%;
  width: auto;
  height: auto;
  display: block;
  margin: 0 auto;
  object-fit: contain;
  border: none;
  box-shadow: none;
  background-color: transparent;
}

.next-button {
  float: right;
  padding-right: 25px;
  display: block;
  margin: 25px auto;
  font-size: 14pt;
  background-color: #003366;
  color: #ffcc33;
  border: 2px solid #ff9933;
  padding: 8px 16px;
  cursor: pointer;
  border-radius: 10px;
  transition: all 0.2s ease;
}

@media screen and (max-width: 600px) {
  .lcars-sidebar {
    width: 100px;
    padding: 5px;
    font-size: 12pt;
  }

  .lcars-main {
    padding: 20px 10px;
    border: 2px solid #ff9933;
    font-size: 12pt;
  }

  .lcars-title-bar {
    font-size: 16pt;
    padding: 5px;
  }

  .lcars-title {
    font-size: 14pt;
  }

  button {
    font-size: 12pt;
    padding: 6px 12px;
  }

  .description,
  .question-count {
    font-size: 14pt;
    margin-top: 20px;
  }

  .question-image-container,
  .answer-image-container {
    width: 75px;
    height: 75px;
    padding: 5px;
  }

  .next-button {
    font-size: 12pt;
    padding-right: 10px;
    margin: 10px auto;
  }

  .lcars-footer {
    font-size: 12pt;
    padding: 10px 0;
  }
}


    </style>
</head>
<body>
    <div class="lcars-title-bar">
        <div class="lcars-title">Star Trek Trivia - LCARS Interface</div>
    </div>

    <div class="lcars-container">
        <div class="lcars-sidebar">
            
        </div>

        <div id="main-content" class="lcars-main">
            <div class="description">
                This may be the hardest Star Trek quiz you have ever taken. The quiz currently offers 379 questions, but will eventually expand to 500 questions. You may choose to play 10, 25 or 50 questions.
            </div>
            <div class="question-count">
                How Many Questions Would You Like to Attempt?
            </div>
            <div class="button-container">
                <button class="question-button">10</button>
                <button class="question-button">25</button>
                <button class="question-button">50</button>
            </div>
        </div>
    </div>

    <div class="lcars-footer">
    <div id="stardate-container">
        <p id="stardate">Star Date: 52174.2</p>
    </div>
    <p>LCARS Terminal - Authorized Personnel Only</p>
</div>

    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {
    setupMainPageEventListeners();

    let stardate = 52174.2;
    setInterval(() => {
        stardate = parseFloat((stardate + 0.1).toFixed(1));
        document.getElementById('stardate').innerHTML = `Star Date:<br>${stardate.toFixed(1)}`;
    }, 5000);

    const categoryElements = document.querySelectorAll('.lcars-category');
    const descriptionElements = document.querySelectorAll('.lcars-description');

    categoryElements.forEach(element => {
        element.style.fontSize = '12pt';
    });

    descriptionElements.forEach(element => {
        element.style.fontSize = '12pt';
    });
});

        const correctImageUrl = 'https://raw.githubusercontent.com/Lead-Role/ST-Trivia/main/Correct%20Answer.gif';
        const incorrectImageUrl = 'https://raw.githubusercontent.com/Lead-Role/ST-Trivia/main/Incorrect%20Answer.gif';

        function setupMainPageEventListeners() {
            document.querySelectorAll('.question-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const numberOfQuestions = parseInt(event.target.textContent, 10);
                    fetchAndShuffleQuestions(numberOfQuestions);
                });
            });
        }

        function fetchAndShuffleQuestions(number) {
            fetch('https://raw.githubusercontent.com/Lead-Role/LCARS-Trivia/refs/heads/main/ST%20Trivia%20101.json')
                .then(response => response.json())
                .then(data => {
                    data.forEach(question => {
                        question['Catagory'] = question['Series / Movie'];
                    });
                    const shuffledQuestions = shuffleArray(data).slice(0, number);
                    startQuiz(shuffledQuestions);
                })
                .catch(error => console.error('Error fetching questions:', error));
        }

        function shuffleArray(array) {
            return array.sort(() => 0.5 - Math.random());
        }

        function startQuiz(questions) {
            let currentQuestionIndex = 0;
            let correctAnswers = 0;

            function showQuestion() {
    if (currentQuestionIndex >= questions.length) {
        showQuizComplete(correctAnswers, currentQuestionIndex);
        return;
    }

    const question = questions[currentQuestionIndex];
    const answers = [
        { text: question['Answer 1'], isCorrect: question['Answer 1'] === question['Correct Answer'] },
        { text: question['Answer 2'], isCorrect: question['Answer 2'] === question['Correct Answer'] },
        { text: question['Answer 3'], isCorrect: question['Answer 3'] === question['Correct Answer'] },
        { text: question['Answer 4'], isCorrect: question['Answer 4'] === question['Correct Answer'] }
    ];
    answers.sort(() => 0.5 - Math.random());

    const mainContent = document.getElementById('main-content');
    mainContent.innerHTML = `
        <div class="lcars-category" style="background-color: #000039; font-size: 20pt; color: gold; font-family: Arial;">Category: ${question['Catagory']}</div>
        <div class="lcars-description" style="background-color: #000039; font-size: 20pt; color: gold; font-family: Arial;">Description: ${question.Description}</div>
        <div class="lcars-question" style="font-family: Arial; font-size: 20pt; color: gold; margin-top: 20px;">${question.Question}</div>
        <div class="lcars-answer-container">
            ${answers.map(answer => 
                `<button class="answer-button" data-correct="${answer.isCorrect}">${answer.text}</button>`
            ).join('')}
        </div>
        <div id="image-left" class="lcars-image-container" style="position: absolute; left: calc(350px + 150px); top: 50%; transform: translateY(-50%); width: 150px; height: 150px; border: 2px solid #ffcc33; border-radius: 10px; box-shadow: 0 0 15px #ff9933;">
            <img src="${question.Images}" alt="Question Image" style="width: 100%; height: 100%; border-radius: 10px;">
        </div>
        <div id="image-right" class="lcars-image-container" style="position: absolute; right: 150px; top: 50%; transform: translateY(-50%); width: 150px; height: 150px; border: 2px solid #ffcc33; border-radius: 10px; box-shadow: 0 0 15px #ff9933;">
            <img src="${question.Images}" alt="Question Image" style="width: 100%; height: 100%; border-radius: 10px;">
        </div>
        <div id="feedback" class="lcars-feedback" style="display: none;"></div>
        <div id="narrative" class="narrative" style="display: none;"></div>
        <div id="question-image-container" class="question-image-container" style="display: none;">
            <img id="feedback-image" src="" class="question-image" alt="Feedback Image" style="width: 200px; height: 200px;"/>
        </div>
        <div id="score" class="lcars-score" style="display: none;"></div>
        <button id="next-button" class="next-button" style="display: none;">Next Question</button>
    `;

    // Dynamically move the images down by 100px
    const leftImage = document.getElementById('image-left');
    const rightImage = document.getElementById('image-right');
    
    const currentTop = window.getComputedStyle(leftImage).top;
    const newTop = `calc(${currentTop} + 100px)`;

    leftImage.style.top = newTop;
    rightImage.style.top = newTop;

    document.querySelectorAll('.answer-button').forEach(button => {
        button.addEventListener('click', (event) => {
            const isCorrect = event.target.getAttribute('data-correct') === 'true';
            const feedbackElement = document.getElementById('feedback');
            const narrativeElement = document.getElementById('narrative');
            const scoreElement = document.getElementById('score');
            const feedbackImage = document.getElementById('feedback-image');
            const questionImageContainer = document.getElementById('question-image-container');
            const nextButton = document.getElementById('next-button');

            // Hide images on feedback page
            leftImage.style.display = 'none';
            rightImage.style.display = 'none';

            document.querySelector('.lcars-answer-container').style.display = 'none';

            if (isCorrect) {
                feedbackElement.innerHTML = `Correct! The correct answer was: ${question['Correct Answer']}`;
                feedbackElement.style.color = 'limegreen';
                correctAnswers++;
                feedbackImage.src = correctImageUrl;
            } else {
                feedbackElement.innerHTML = `Incorrect! The correct answer was: ${question['Correct Answer']}`;
                feedbackElement.style.color = 'tomato';
                feedbackImage.src = incorrectImageUrl;
            }

            feedbackElement.style.display = 'block';
            feedbackElement.style.marginTop = '50px';
            narrativeElement.innerHTML = `${question['Narrative']}`;
            narrativeElement.style.display = 'block';
            narrativeElement.style.marginTop = '50px';
            questionImageContainer.style.display = 'block';
            questionImageContainer.style.marginTop = '30px';
            scoreElement.innerHTML = `Score: ${correctAnswers} out of ${currentQuestionIndex + 1}`;
            scoreElement.style.display = 'block';
            scoreElement.style.marginTop = '25px';
            nextButton.style.display = 'block';
            nextButton.style.marginTop = '50px';
        });
    });

    document.getElementById('next-button').addEventListener('click', () => {
        currentQuestionIndex++;
        showQuestion();
    });
}

            showQuestion();
        }

        function showQuizComplete(correctAnswers, totalQuestions) {
    const mainContent = document.getElementById('main-content');
    mainContent.innerHTML = `
        <div class="lcars-complete-container" style="position: relative; width: 100%; height: 100%; background-color: #000000; display: flex; flex-direction: column; justify-content: center; align-items: center;">
            
            <!-- Asymmetrical Panels -->
            <div style="position: absolute; top: 0; left: 0; width: 35%; height: 100%; background-color: #800020; clip-path: polygon(0 0, 100% 0, 100% 100%, 0 90%);"></div>
            <div style="position: absolute; top: 0; right: 0; width: 20%; height: 100%; background-color: #003366; clip-path: polygon(0 10%, 100% 0, 100% 100%, 0 100%);"></div>

            <!-- Large Score Panel -->
            <div style="position: relative; z-index: 2; background-color: rgba(255, 204, 51, 0.95); padding: 30px; border-radius: 20px; border: 3px solid #ff9933; color: #000000; font-family: 'Orbitron', sans-serif; font-size: 28pt; text-align: center; width: 50%; box-shadow: 0 0 40px #ffcc33;">
                <strong>Quiz Complete!</strong><br>
                <span style="color: #003366;">Score: ${correctAnswers} / ${totalQuestions}</span>
            </div>

            <!-- Iconography for Extra Style -->
            <div style="position: absolute; top: 10%; right: 20%; font-size: 80px; color: rgba(255, 204, 51, 0.3);">
                &#9733;
            </div>
            <div style="position: absolute; bottom: 10%; left: 15%; font-size: 60px; color: rgba(255, 204, 51, 0.3);">
                &#11088;
            </div>

            <!-- LCARS Footer Message -->
            <div style="position: relative; z-index: 2; color: #ffcc33; font-size: 20pt; font-family: 'Orbitron', sans-serif; margin-top: 30px;">
                Well done, Captain! Ready for another challenge?
            </div>

            <!-- Play Again Button with More LCARS Feel -->
            <button id="play-again-button" style="position: relative; z-index: 2; background-color: #003366; color: #ffcc33; border: 3px solid #ff9933; padding: 15px 30px; font-size: 16pt; font-family: 'Orbitron', sans-serif; border-radius: 15px; margin-top: 40px; cursor: pointer; transition: all 0.3s ease-in-out; box-shadow: 0 0 25px #ff9933;">
                Engage
            </button>
        </div>
    `;

    const playAgainButton = document.getElementById('play-again-button');
    playAgainButton.addEventListener('click', () => {
        resetToMainPage();
    });

    // Hover effect for the Play Again button
    playAgainButton.addEventListener('mouseenter', () => {
        playAgainButton.style.backgroundColor = '#ff9933';
        playAgainButton.style.color = '#000000';
        playAgainButton.style.boxShadow = '0 0 30px #ffcc33';
    });
    playAgainButton.addEventListener('mouseleave', () => {
        playAgainButton.style.backgroundColor = '#003366';
        playAgainButton.style.color = '#ffcc33';
        playAgainButton.style.boxShadow = '0 0 25px #ff9933';
    });
}

        function resetToMainPage() {
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <div class="description">
                    This may be the hardest Star Trek quiz you have ever taken. The quiz currently offers 379 questions, but will eventually expand to 500 questions. You may choose to play 10, 25 or 50 questions.
                </div>
                <div class="question-count">
                    How Many Questions Would You Like to Attempt?
                </div>
                <div class="button-container">
                    <button class="question-button">10</button>
                    <button class="question-button">25</button>
                    <button class="question-button">50</button>
                </div>
            `;
            setupMainPageEventListeners();
        }
    </script>
</body>
</html>
